var Ne=Object.create;var X=Object.defineProperty;var Fe=Object.getOwnPropertyDescriptor;var Be=Object.getOwnPropertyNames;var Le=Object.getPrototypeOf,De=Object.prototype.hasOwnProperty;var w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Pe=(t,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Be(e))!De.call(t,n)&&n!==o&&X(t,n,{get:()=>e[n],enumerable:!(r=Fe(e,n))||r.enumerable});return t};var L=(t,e,o)=>(o=t!=null?Ne(Le(t)):{},Pe(e||!t||!t.__esModule?X(o,"default",{value:t,enumerable:!0}):o,t));var J=w((Ut,Z)=>{var b=1e3,T=b*60,E=T*60,g=E*24,Ge=g*7,je=g*365.25;Z.exports=function(t,e){e=e||{};var o=typeof t;if(o==="string"&&t.length>0)return ke(t);if(o==="number"&&isFinite(t))return e.long?qe(t):Ue(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function ke(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var o=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return o*je;case"weeks":case"week":case"w":return o*Ge;case"days":case"day":case"d":return o*g;case"hours":case"hour":case"hrs":case"hr":case"h":return o*E;case"minutes":case"minute":case"mins":case"min":case"m":return o*T;case"seconds":case"second":case"secs":case"sec":case"s":return o*b;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function Ue(t){var e=Math.abs(t);return e>=g?Math.round(t/g)+"d":e>=E?Math.round(t/E)+"h":e>=T?Math.round(t/T)+"m":e>=b?Math.round(t/b)+"s":t+"ms"}function qe(t){var e=Math.abs(t);return e>=g?_(t,e,g,"day"):e>=E?_(t,e,E,"hour"):e>=T?_(t,e,T,"minute"):e>=b?_(t,e,b,"second"):t+" ms"}function _(t,e,o,r){var n=e>=o*1.5;return Math.round(t/o)+" "+r+(n?"s":"")}});var re=w((qt,oe)=>{var Ye=J(),We=1e6,Ve=10,Q=14,ee="Hello from demini test fixture",He="1.0.0",ze=0,Ke=1,Xe=299792458,Ze=1.6180339887,Je=2.7182818284,te=Ye("5s"),Qe=Object.freeze({DEBUG:0,INFO:1,WARN:2,ERROR:3}),et=Object.freeze({verbose:!1,precision:Q,maxRetries:3,greeting:ee,timeout:te});oe.exports={MAX_ITERATIONS:We,DEFAULT_TRIALS:Ve,PI_DIGITS:Q,GREETING:ee,VERSION:He,EXIT_SUCCESS:ze,EXIT_FAILURE:Ke,SPEED_OF_LIGHT:Xe,GOLDEN_RATIO:Ze,EULER_NUMBER:Je,DEFAULT_TIMEOUT:te,LogLevel:Qe,DEFAULT_CONFIG:et}});var ae=w((Yt,ie)=>{var D=/[\s,;:!?.]+/,ne=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;function se(t,...e){return t.reduce((o,r,n)=>{let s=n<e.length?`[${e[n]}]`:"";return o+r+s},"")}function tt(t){return t.split(D).filter(e=>e.length>0).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function ot(t){let e=t.toLowerCase().split(D).filter(Boolean),o=new Map;for(let r of e)o.set(r,(o.get(r)||0)+1);return o}function rt(t){return ne.test(t)}function nt(t,e,o){return se`Result: ${t} = ${e} ${o}`}ie.exports={highlight:se,titleCase:tt,wordFrequency:ot,isValidEmail:rt,formatSummary:nt,WORD_SEPARATOR:D,EMAIL_PATTERN:ne}});var ce=w((Wt,le)=>{function st(t){return[...t].sort((e,o)=>o.score-e.score).map(({name:e,score:o},r)=>({rank:r+1,name:e,score:o}))}function it(t,e){return t.reduce((o,r)=>{let n=e(r);return{...o,[n]:[...o[n]??[],r]}},{})}function at(t,e="unknown"){return t?.data?.nested?.value??e}function lt(...t){return t.reduce((e,o)=>({...e,...o}),{})}function ct(t){if(t.length===0)return{min:0,max:0,mean:0,sum:0,count:0};let{min:e,max:o,sum:r}=t.reduce((n,s)=>({min:Math.min(n.min,s),max:Math.max(n.max,s),sum:n.sum+s}),{min:1/0,max:-1/0,sum:0});return{min:e,max:o,mean:r/t.length,sum:r,count:t.length}}function ut(t,e){return Object.fromEntries(e.map((o,r)=>[`${t}_${o}`,r+1]))}le.exports={leaderboard:st,groupBy:it,safeExtract:at,mergeConfigs:lt,computeStats:ct,computedProperties:ut}});var V=L(re(),1),we=L(ae(),1),_e=L(ce(),1);var P=3.14159265358979,ue=1;function G(t=1e5){let e=[];for(let o=0;o<t;o++){let r=Math.random(),n=Math.random(),s=r*r+n*n<=ue*ue;e.push({x:r,y:n,inside:s})}return e}function j(t){let e=t.filter(n=>n.inside).length,o=4*e/t.length,r=Math.abs(o-P);return{estimate:o,error:r,total:t.length,inside:e}}function fe(t=10,e=1e5){let o=[];for(let i=0;i<t;i++){let c=G(e),{estimate:d}=j(c);o.push(d)}let r=o.reduce((i,c)=>i+c,0)/t,n=o.reduce((i,c)=>i+(c-r)**2,0)/(t-1),s=Math.sqrt(n);return{mean:r,stddev:s,trials:t,estimates:o}}var me=(t=0)=>e=>`\x1B[${e+t}m`,he=(t=0)=>e=>`\x1B[${38+t};5;${e}m`,de=(t=0)=>(e,o,r)=>`\x1B[${38+t};2;${e};${o};${r}m`,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},Ht=Object.keys(a.modifier),ft=Object.keys(a.color),mt=Object.keys(a.bgColor),zt=[...ft,...mt];function ht(){let t=new Map;for(let[e,o]of Object.entries(a)){for(let[r,n]of Object.entries(o))a[r]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},o[r]=a[r],t.set(n[0],n[1]);Object.defineProperty(a,e,{value:o,enumerable:!1})}return Object.defineProperty(a,"codes",{value:t,enumerable:!1}),a.color.close="\x1B[39m",a.bgColor.close="\x1B[49m",a.color.ansi=me(),a.color.ansi256=he(),a.color.ansi16m=de(),a.bgColor.ansi=me(10),a.bgColor.ansi256=he(10),a.bgColor.ansi16m=de(10),Object.defineProperties(a,{rgbToAnsi256:{value(e,o,r){return e===o&&o===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(o/255*5)+Math.round(r/255*5)},enumerable:!1},hexToRgb:{value(e){let o=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!o)return[0,0,0];let[r]=o;r.length===3&&(r=[...r].map(s=>s+s).join(""));let n=Number.parseInt(r,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:e=>a.rgbToAnsi256(...a.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){if(e<8)return 30+e;if(e<16)return 90+(e-8);let o,r,n;if(e>=232)o=((e-232)*10+8)/255,r=o,n=o;else{e-=16;let c=e%36;o=Math.floor(e/36)/5,r=Math.floor(c/6)/5,n=c%6/5}let s=Math.max(o,r,n)*2;if(s===0)return 30;let i=30+(Math.round(n)<<2|Math.round(r)<<1|Math.round(o));return s===2&&(i+=60),i},enumerable:!1},rgbToAnsi:{value:(e,o,r)=>a.ansi256ToAnsi(a.rgbToAnsi256(e,o,r)),enumerable:!1},hexToAnsi:{value:e=>a.ansi256ToAnsi(a.hexToAnsi256(e)),enumerable:!1}}),a}var dt=ht(),m=dt;import k from"node:process";import gt from"node:os";import ge from"node:tty";function f(t,e=globalThis.Deno?globalThis.Deno.args:k.argv){let o=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(o+t),n=e.indexOf("--");return r!==-1&&(n===-1||r<n)}var{env:l}=k,v;f("no-color")||f("no-colors")||f("color=false")||f("color=never")?v=0:(f("color")||f("colors")||f("color=true")||f("color=always"))&&(v=1);function pt(){if("FORCE_COLOR"in l)return l.FORCE_COLOR==="true"?1:l.FORCE_COLOR==="false"?0:l.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(l.FORCE_COLOR,10),3)}function bt(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Tt(t,{streamIsTTY:e,sniffFlags:o=!0}={}){let r=pt();r!==void 0&&(v=r);let n=o?v:r;if(n===0)return 0;if(o){if(f("color=16m")||f("color=full")||f("color=truecolor"))return 3;if(f("color=256"))return 2}if("TF_BUILD"in l&&"AGENT_NAME"in l)return 1;if(t&&!e&&n===void 0)return 0;let s=n||0;if(l.TERM==="dumb")return s;if(k.platform==="win32"){let i=gt.release().split(".");return Number(i[0])>=10&&Number(i[2])>=10586?Number(i[2])>=14931?3:2:1}if("CI"in l)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(i=>i in l)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(i=>i in l)||l.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in l)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(l.TEAMCITY_VERSION)?1:0;if(l.COLORTERM==="truecolor"||l.TERM==="xterm-kitty"||l.TERM==="xterm-ghostty"||l.TERM==="wezterm")return 3;if("TERM_PROGRAM"in l){let i=Number.parseInt((l.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(l.TERM_PROGRAM){case"iTerm.app":return i>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(l.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(l.TERM)||"COLORTERM"in l?1:s}function pe(t,e={}){let o=Tt(t,{streamIsTTY:t&&t.isTTY,...e});return bt(o)}var Et={stdout:pe({isTTY:ge.isatty(1)}),stderr:pe({isTTY:ge.isatty(2)})},be=Et;function Te(t,e,o){let r=t.indexOf(e);if(r===-1)return t;let n=e.length,s=0,i="";do i+=t.slice(s,r)+e+o,s=r+n,r=t.indexOf(e,s);while(r!==-1);return i+=t.slice(s),i}function Ee(t,e,o,r){let n=0,s="";do{let i=t[r-1]==="\r";s+=t.slice(n,i?r-1:r)+e+(i?`\r
`:`
`)+o,n=r+1,r=t.indexOf(`
`,n)}while(r!==-1);return s+=t.slice(n),s}var{stdout:Ae,stderr:Re}=be,U=Symbol("GENERATOR"),A=Symbol("STYLER"),O=Symbol("IS_EMPTY"),xe=["ansi","ansi","ansi256","ansi16m"],R=Object.create(null),At=(t,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let o=Ae?Ae.level:0;t.level=e.level===void 0?o:e.level};var Rt=t=>{let e=(...o)=>o.join(" ");return At(e,t),Object.setPrototypeOf(e,M.prototype),e};function M(t){return Rt(t)}Object.setPrototypeOf(M.prototype,Function.prototype);for(let[t,e]of Object.entries(m))R[t]={get(){let o=N(this,Y(e.open,e.close,this[A]),this[O]);return Object.defineProperty(this,t,{value:o}),o}};R.visible={get(){let t=N(this,this[A],!0);return Object.defineProperty(this,"visible",{value:t}),t}};var q=(t,e,o,...r)=>t==="rgb"?e==="ansi16m"?m[o].ansi16m(...r):e==="ansi256"?m[o].ansi256(m.rgbToAnsi256(...r)):m[o].ansi(m.rgbToAnsi(...r)):t==="hex"?q("rgb",e,o,...m.hexToRgb(...r)):m[o][t](...r),xt=["rgb","hex","ansi256"];for(let t of xt){R[t]={get(){let{level:o}=this;return function(...r){let n=Y(q(t,xe[o],"color",...r),m.color.close,this[A]);return N(this,n,this[O])}}};let e="bg"+t[0].toUpperCase()+t.slice(1);R[e]={get(){let{level:o}=this;return function(...r){let n=Y(q(t,xe[o],"bgColor",...r),m.bgColor.close,this[A]);return N(this,n,this[O])}}}}var yt=Object.defineProperties(()=>{},{...R,level:{enumerable:!0,get(){return this[U].level},set(t){this[U].level=t}}}),Y=(t,e,o)=>{let r,n;return o===void 0?(r=t,n=e):(r=o.openAll+t,n=e+o.closeAll),{open:t,close:e,openAll:r,closeAll:n,parent:o}},N=(t,e,o)=>{let r=(...n)=>Ot(r,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(r,yt),r[U]=t,r[A]=e,r[O]=o,r},Ot=(t,e)=>{if(t.level<=0||!e)return t[O]?"":e;let o=t[A];if(o===void 0)return e;let{openAll:r,closeAll:n}=o;if(e.includes("\x1B"))for(;o!==void 0;)e=Te(e,o.close,o.open),o=o.parent;let s=e.indexOf(`
`);return s!==-1&&(e=Ee(e,n,r,s)),r+e+n};Object.defineProperties(M.prototype,R);var Mt=M(),no=M({level:Re?Re.level:0});var h=Mt;var u=20,Ct=40,p=10;function ye(t){let e=Array.from({length:u},()=>Array(u).fill(" ")),o=0,r=0;for(let n of t){let s=Math.floor(n.x*u),i=Math.floor((1-n.y)*u);n.inside?(o++,i>=0&&i<u&&s>=0&&s<u&&(e[i][s]=h.green("\u25CF"))):(r++,i>=0&&i<u&&s>=0&&s<u&&(e[i][s]=h.red("\u25CB")))}for(let n=0;n<u;n++)for(let s=0;s<u;s++){let i=s/u,c=1-n/u,d=Math.sqrt(i*i+c*c);Math.abs(d-1)<.06&&e[n][s]===" "&&(e[n][s]=h.blue("\xB7"))}console.log(h.bold(`
  Quarter-Circle Dartboard`)),console.log("  "+"\u2500".repeat(u*2+2));for(let n of e)console.log("  \u2502"+n.map(s=>s+" ").join("")+"\u2502");console.log("  "+"\u2500".repeat(u*2+2)),console.log(`  ${h.green("\u25CF")} inside: ${o}  ${h.red("\u25CB")} outside: ${r}  \u03C0 \u2248 ${(4*o/t.length).toFixed(4)}`)}function Oe(t){let e=Math.min(...t),r=Math.max(...t)-e||.001,n=Array(p).fill(0);for(let i of t){let c=Math.min(Math.floor((i-e)/r*p),p-1);n[c]++}let s=Math.max(...n);console.log(h.bold(`
  Distribution of Pi Estimates`)),console.log();for(let i=0;i<p;i++){let c=(e+r*i/p).toFixed(3),d=Math.round(n[i]/s*Ct),y="\u2588".repeat(d),I=e+r*i/p<=3.14159&&3.14159<=e+r*(i+1)/p?h.yellow(`${c} \u03C0\u2192`):`${c}   `;console.log(`  ${I} ${h.cyan(y)} ${n[i]}`)}}async function W(t,e=10){return await new Promise(o=>setTimeout(o,e)),{url:t,status:200,data:`Response from ${t}`}}async function Me(t){return(await Promise.all(t.map(o=>W(o)))).map(o=>o.data)}function*Ce(t=10){let e=0,o=1;for(let r=0;r<t;r++)yield e,[e,o]=[o,e+o]}var x=class t{#e;#t;constructor(e,o="black"){this.#e=e,this.#t=o}get name(){return this.#e}get color(){return this.#t}set color(e){this.#t=e}area(){throw new Error(`${this.#e}.area() not implemented`)}describe(){return`${this.#t} ${this.#e} with area ${this.area().toFixed(4)}`}static isShape(e){return e instanceof t}},F=class extends x{#e;constructor(e,o){super("circle",o),this.#e=e}get radius(){return this.#e}area(){return Math.PI*this.#e**2}circumference(){return 2*Math.PI*this.#e}},C=class extends x{#e;#t;constructor(e,o,r){super("rectangle",r),this.#e=e,this.#t=o}get width(){return this.#e}get height(){return this.#t}area(){return this.#e*this.#t}perimeter(){return 2*(this.#e+this.#t)}isSquare(){return this.#e===this.#t}};function Se(t){let e=t.reduce((r,n)=>r+n.area(),0),o={};for(let r of t){let n=r.name;o[n]=(o[n]||0)+1}return{totalArea:e,count:t.length,byType:o}}var{GREETING:St,VERSION:It,LogLevel:$t,DEFAULT_CONFIG:wt,GOLDEN_RATIO:_t}=V.default,{titleCase:vt,wordFrequency:Nt,formatSummary:Ft,isValidEmail:Ie}=we.default,{leaderboard:Bt,groupBy:Lt,safeExtract:$e,computeStats:Dt,mergeConfigs:Pt}=_e.default;async function Gt(){console.log(`${St} v${It}
`),console.log("=== Monte Carlo Pi Estimation ===");let t=G(500),e=j(t);console.log(`  Single trial (${e.total} darts): \u03C0 \u2248 ${e.estimate.toFixed(6)} (error: ${e.error.toFixed(6)})`),ye(t);let o=fe(20,1e4);console.log(`
  Multi-trial (${o.trials} x 10k): mean \u03C0 \u2248 ${o.mean.toFixed(6)} (\u03C3 = ${o.stddev.toFixed(6)})`),Oe(o.estimates),console.log(`
=== String Utilities ===`);let r=vt("the quick brown fox jumps over the lazy dog");console.log(`  Title case: "${r}"`);let n=Nt("to be or not to be that is the question");console.log(`  Word frequencies: ${JSON.stringify(Object.fromEntries(n))}`),console.log(`  Email valid: ${Ie("user@example.com")}`),console.log(`  Email invalid: ${Ie("not-an-email")}`),console.log(`  ${Ft("pi",e.estimate.toFixed(4),"radians")}`),console.log(`
=== Async Patterns ===`);let s=await W("https://api.example.com/data");console.log(`  Fetch: ${s.data} (status ${s.status})`);let i=await Me(["https://a.test","https://b.test"]);console.log(`  Parallel fetch: ${i.length} responses`);let c=[...Ce(10)];console.log(`  Fibonacci(10): [${c.join(", ")}]`),console.log(`
=== Class Hierarchy ===`);let d=new F(5,"blue"),y=new C(4,6,"red"),S=new C(3,3,"green");console.log(`  ${d.describe()}`),console.log(`  ${y.describe()} (square: ${y.isSquare()})`),console.log(`  ${S.describe()} (square: ${S.isSquare()})`),console.log(`  Shape.isShape(circle): ${x.isShape(d)}`);let I=Se([d,y,S]);console.log(`  Report: ${I.count} shapes, total area ${I.totalArea.toFixed(4)}`),console.log(`
=== Data Transforms ===`);let H=[{name:"Alice",score:95},{name:"Bob",score:87},{name:"Charlie",score:92},{name:"Diana",score:98}],ve=Bt(H);console.log(`  Leaderboard: ${ve.map($=>`#${$.rank} ${$.name}`).join(", ")}`);let z=Lt(H,$=>$.score>=90?"A":"B");console.log(`  Groups: A=${z.A?.length??0}, B=${z.B?.length??0}`),console.log(`  Safe extract: "${$e({data:{nested:{value:"found it"}}})}", missing: "${$e({})}"`);let B=Dt([1,2,3,4,5]);console.log(`  Stats: mean=${B.mean}, min=${B.min}, max=${B.max}`);let K=Pt(wt,{verbose:!0});console.log(`  Merged config verbose: ${K.verbose}, precision: ${K.precision}`),console.log(`
=== Constants ===`),console.log(`  LogLevel.WARN = ${$t.WARN}`),console.log(`  Golden ratio: ${_t}`),console.log(`  Pi reference: ${P}`),console.log(`  Default timeout: ${V.default.DEFAULT_TIMEOUT}ms`),console.log(`
Done.`)}Gt().catch(console.error);
